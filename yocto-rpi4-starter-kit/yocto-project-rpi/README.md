# Preconfigured Yocto Build Project for Raspberry Pi 4
This folder contains a ready-to-use Yocto project configured to build a custom Linux image for Raspberry Pi 4. All layers, settings, and configuration files are pre-integrated.


## Quick Start

### Initialize the Environment
```bash
cd yocto-project-rpi
source poky/oe-init-build-env
```

Derleme işlemine başlamadan önce sistem yeterliliklerini mutlaka kontrol edin. Bununla ilgili detaylı bilgiye [buradan](../../docs/yocto-raspberrypi4-setup.md) ulaşabilirsiniz.

```bash
bitbake core-image-base
```
Bu süreç sisteminize bağlı olarak 1-3 saat aralığında vakit alabilir.

### Output 

After the build is complete, the image file will be located at:

```bash
build/tmp/deploy/images/raspberrypi4-64/core-image-base-raspberrypi4-64.wic.bz2
```

You can flash this image onto an SD card using balenaEtcher or the dd command.

### config.txt Settings

config.txt is a fundamental configuration file that defines the hardware settings for Raspberry Pi during the boot process. This file sets options such as GPU memory, display resolution, video output, overlays (driver extensions), and other hardware parameters. Images generated by Yocto include this file, but manual edits may be required when using custom hardware (e.g., DSI displays, touch panels, or additional sensors).

In our project, adjustments are needed for display and touchscreen settings. When you open your SD card on Windows, you can access the **boot** directory and modify its contents. Locate the **config.txt** file inside the **boot** folder and:

- To enable the UART on Raspberry Pi 4, ensure the line enable_uart=1 is present in the file.  
- To enable output via DSI, one of the following lines must be present: dtoverlay=vc4-fkms-v3d or dtoverlay=vc4-kms-v3d.  
  - If your interface uses the Framebuffer, use dtoverlay=vc4-fkms-v3d.  
  - If you are using a modern GPU-accelerated Qt or Wayland-based system, use dtoverlay=vc4-kms-v3d.  
  - **Do not include both lines at the same time!**  
- To enable touchscreen functionality, find the line dtparam=i2c_arm and update it to dtparam=i2c_arm=on.  
  - Then add the following line at the end of the file: dtoverlay=rpi-ft5406

Save and close the file. Your SD card is now ready to be inserted into the Raspberry Pi device.

> ⚠️ **WARNING:**  
> Before removing the SD card from your computer, always perform the **"Eject XX Storage Device"** operation.  
> Otherwise, the image may become corrupted and the system may fail to boot.

## Need Help?
You can find the full documentation for detailed setup instructions, SDK installation and usage, and LVGL build details [here](../../docs/yocto-raspberrypi4-setup.md).

If you encounter any errors during the setup or post-installation steps, you can refer to the [FAQ document](../../docs/FAQ.md).

You can access the source code and compiled output of the sample LVGL application in [this document](../lvgl-demo/README.md).
